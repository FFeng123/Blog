在这之前，我认为斐波那契数列这种东西是没有通项公式的...


众所周知，斐波那契数列的递推式：![递推式](/datas/images/math/11-2-1.gif)

至于推导通项公式嘛...

先把斐波那契数列设为![数列](/datas/images/math/11-2-6.gif)，书中让斐波那契数列是{0,1,1,2,3,5, ...}，如果不这样而是 {1,1,2,3,5, ...}应该也能推的出来，结果应该大有不同，为了避免最后推错了再找BUG，我还是按照书里说的。

## 生成函数

这玩意儿书里用到了，但我没学过，对着书琢磨了一会儿，大概知道它是啥东西了。这是我对生成函数的理解：

如果我有一个有限数列![数列](/datas/images/math/11-2-2.gif)，它的生成函数F(x)就是![生成函数](/datas/images/math/11-2-3.gif)，
同样，无限的数列也这样，![数列](/datas/images/math/11-2-4.gif)的生成函数![生成函数](/datas/images/math/11-2-5.gif)

生成函数中自变量x的没什么用，它的取值没什么意义，生成函数中x的不同次幂大概就是为了区别数列中不同的项，让它们不能合并同类项。

> 突然想到了以前用柏林噪声写游戏的地图生成，有个函数叫生成函数...

这样斐波那契数列的生成函数是：![生成函数](/datas/images/math/11-2-7.gif)

## 封闭表达式

封闭表达式是个名称，而不是 把表达式封闭 这个动词

到这里这个生成函数还没什么用，接下来要求它的封闭表达式，
所谓封闭表达式，大概就是让它的长度固定，设法去掉后面的 ...

这里要利用斐波那契数列的性质：![性质](/datas/images/math/11-2-8.gif)

如果可以把 F[n-2] 加上 F[n-1] 再减去 F[n] 的话，这就抵消成零了。

这几个系数所对应的项肯定是这样的：

|  系数   |  项   |
| :-: | :-: |
|  F[n-2]   |   F[n-2] x^(n - 2)  |
|  F[n-1]   |   F[n-2] x^(n - 1)  |
|  F[n]   |  F[n-2] x^(n)   |

这几个肯定是不能合并同类项的，假如我给它乘上不同次幂的x的话，就可以合并了。

F[n-2] x^(n - 2) 乘 x^2 得 F[n-2] x^n，
F[n-2] x^(n - 1) 乘 x^1 得 F[n-1] x^n，
F[n-2] x^n 不用乘。

给一个多项式中不同的项乘不同的东西刻不好办，所以这里用三个式子。![式子](/datas/images/math/11-2-9.gif)

之后 A + B - C ：![式子](/datas/images/math/11-2-10.gif)

## 无穷极数表示

这一过程就是把算出来的封闭表达式再变回去，变成那个带省略号的样子。

而F[...]什么的都消掉了，变回去之后也不应该带着F[...]，否则这样兜一圈就没意义了。

变回去之后也应该是有着 ax^0 + bx^1 + cx^2 这样的形式，以便和最初的F(x)联立求通项公式。

这是书中之前推导的公式：![式子](/datas/images/math/11-2-11.gif)，其中一种说法是，首项为1公比为x的数列求和公式。

这个式子右边刚好可以和生成函数的形式对应。现在把刚才推导出来的那个式子设法用这个式子左边的形式表示出来。

那么什么叫做这个式子的形式呢？
这样的称为这个式子的形式： ![式子](/datas/images/math/11-2-12.gif)

其中的a可以看成等式两边同时乘了a，

其中的b可以看成是拿bx给x[换元](https://baike.baidu.com/item/%E6%8D%A2%E5%85%83%E6%B3%95/9212917)得来的。

（因为我很懒，从这往下就没有算，拿的书上的结果）

接下来设未知数，解方程：
 ![式子](/datas/images/math/11-2-13.gif)
然后 
![式子](/datas/images/math/11-2-14.gif)

接下来就是解R，S，r，s

因为![式子](/datas/images/math/11-2-12.gif)这个式子右边并没有出现n什么的，所以为了方便数学归纳，先把R和S带进去，r和s先不动。
![式子](/datas/images/math/11-2-16.gif)
然后简单数学归纳。再带r和s。

最终之作:

![通项公式](/datas/images/math/11-2-15.gif)

