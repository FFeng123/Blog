Ipv6这个东西很久以前就有了，从很久很久以前我就发现，只要把windows的Tcp/Ipv6关了就能提高网速。

那个时候用的路由器不支持Ipv6，Ipv6只是个累赘，所以开了Ipv6会掉网速。

在这之后换了新的宽带，光猫支持IPv6，但是觉得没什么用，一直也没有用，直到有一天，我得知IPv6的IP分配方式。

## IPv4

首先，ipv4的ip是32位的数，整个世界上能用的ipv4的数量也就 4294967295 个这么多，所以不是很够用。

这样，一个光猫就只能分得一个IP地址，这个光猫暂且称为网关。

为了局域网内的设备能够访问外网，局域网内的设备在访问外网地址时，网关作为一个代理，通过光猫的IP访问外网。

这种情况下外网就不能主动访问到局域网了，因为暴露在外网上的只有网关，可以通过设置网关的虚拟服务器、端口映射之类的使外网可以访问到特定设备。

当然现在IPv4的地址似乎已经不够一个光猫分一个了，现在是很多光猫用一个IP地址，所以外网主动访问局域网无论如何也不可能实现了（tcp、udp打洞什么的技术手段可以）

之前和同学一起玩游戏服务器，为了能够把自己的服务器暴露在公网上，用了个叫做反向代理的东西，[SAKURA FRP](https://www.natfrp.com/)。

开了个互通服务器。

Java版的Minecraft用的是Tcp协议，延迟很低，一点也不卡。
PE版的MInecraft用的是Udp协议，似乎拿这个反向代理玩MinecraftPE的人太多了，反向代理的服务器PPS（每秒发送多少个分组数据包）满了，非常非常卡，用手机玩的朋友根本就卡到不能玩。

可惜当时不知道有IPv6啊。

## IPv6

IPv6的ip是128位的数，长度比Ipv4大了4倍，数量多了 2的96次方，说是可以给世界上每一粒沙子分一个IP，写成这个冒号分割的8个4位16进制数。

似乎是因为国家想要推进IPv6普及，要求营业商必须给用户足够多的IP地址，因此，光猫会得到营业商下发的一个IPv6的IP网段，光猫会让每个设备都有公网上的IP。

没错，是公网IP。

每一个支持IPv6的设备都有若干个Ipv6地址，比较可惜的是这个IPv6地址总是改变，最好搭配DDNS用（算是自动把IP地址映射到域名上的一种技术吧）。

现在手机上面用数据流量时是会获得IPv6地址的。

在一些填写地址的地方，填写类似xxx.xxx.xxx.xxx:80这样的东西会被当成IPv4地址，填写类似xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:80这样的东西可能会被当成域名，因此Ipv6地址需要写成这样：[xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]:80

一般的软件似乎都是支持IPv6的，但是这些软件在最初设计的时候可能并没有考虑IPv6，所以可能偶尔需要动动脑子。

为了方便传输文件，我把一个FTP服务器暴露在公网上了，手机上用的 ES文件浏览器 这个软件。

据我测试，这个软件就需要动动脑子。
FTP服务器有服务器地址和端口这两个输入框。
服务器地址填写[xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]、xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx都不行。
但是写成这样子就可以了：[xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]:21
端口这个输入框没用了。

## 安全问题

众所周知，Windows上有个东西叫防火墙。

这玩意儿我一直都在想，明明一个网关把流量都截在外面了，要防火墙还有什么用呢。

现在，有了IPv6，设备暴露在公网上，防火墙就十分重要了。

我的电脑是精简操作系统，没有防火墙，稍微有点担心呢。

## DDNS

为了让总是变化的IP地址固定住，需要用到DDNS。

当然，这肯定需要有一个域名，域名是要买的，但是二级域名是有办法可以免费拿到的。

比如说，[每步科技](http://meibu.com/)就可以免费拿到二级域名。


